{"version":3,"file":"main.js","sources":["src/scripts/version.js","src/scripts/modules/bus.js","src/scripts/components/base.js","src/scripts/components/accordion/accordion.js","src/scripts/components/template/template.js","src/scripts/feds.js","src/scripts/main.js"],"sourcesContent":["export default \"1.0.0.712\";","export default class Bus {\r\n  on(event, listener) {\r\n    this._eventCollection = this._eventCollection || {};\r\n    this._eventCollection[event] = this._eventCollection[event] || [];\r\n    this._eventCollection[event].push(listener);\r\n    return this;\r\n  }\r\n\r\n  once(event, listener) {\r\n    const self = this;\r\n    function fn() {\r\n      self.off(event, fn);\r\n      listener.apply(this, arguments);\r\n    }\r\n    fn.listener = listener;\r\n    this.on(event, fn);\r\n    return this;\r\n  }\r\n\r\n  off(event, listener) {\r\n    let listeners;\r\n    if (!this._eventCollection || !(listeners = this._eventCollection[event]))\r\n      return this;\r\n    listeners.forEach((fn, i) => {\r\n      if (fn === listener || fn.listener === listener) listeners.splice(i, 1);\r\n    });\r\n    if (listeners.length === 0) delete this._eventCollection[event];\r\n    return this;\r\n  }\r\n\r\n  trigger(event, ...args) {\r\n    let listeners;\r\n    if (!this._eventCollection || !(listeners = this._eventCollection[event])) {\r\n      return this;\r\n    }\r\n    listeners = listeners.slice(0);\r\n    listeners.forEach(fn => fn.apply(this, args));\r\n    return this;\r\n  }\r\n}\r\n","export default class Component {\r\n  constructor(id = \"\") {\r\n    this.id = id;\r\n    this.el = document.querySelector(`#${id}`);\r\n  }\r\n}\r\n","import Base from \"../base\";\n\nexport class Tab {\n  constructor(el, parent, expanded = false) {\n    this.id = el.dataset.tab;\n    this.el = el;\n    this.parent = parent;\n    this.label = this.el.querySelector(\"label\");\n    this.content = this.el.querySelector(\"div\");\n    this.caret = this.el.querySelector(\"i\");\n    this.expanded = expanded;\n    // events\n    this.label.addEventListener(\"click\", this.toggle.bind(this));\n    if (this.expanded) this.toggle();\n  }\n  toggle() {\n    this.expanded = !this.expanded;\n    this.content.classList.toggle(\"hidden\");\n    this.caret.classList.toggle(\"rotate-30\");\n  }\n}\n\nexport class Accordion extends Base {\n  constructor(id = \"\") {\n    super(id, name);\n    this.tabs = this.initTabs();\n    return this;\n  }\n  initTabs() {\n    return [...this.el.children].map(i => new Tab(i, this));\n  }\n}\n","import Base from \"../base\";\n\n// Example:\n// <%if(showRecords) {%>\n// <%for(var i in records) {%>\n// <a href=\"#\">\n//   <%records[i]%></a>\n// <%}%>\n// <%} else {%>\n// <p>no records</p>\n// <%}%>\n\nexport class TemplateEngine {\n  constructor(html) {\n    var re = /<%(.+?)%>/g;\n    const reExp = /(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g;\n    let code = \"with(params) { var r=[];\\n\";\n    let cursor = 0;\n    let result, match;\n    var add = function(line, js) {\n      js\n        ? (code += line.match(reExp) ? line + \"\\n\" : \"r.push(\" + line + \");\\n\")\n        : (code +=\n            line != \"\" ? 'r.push(\"' + line.replace(/\"/g, '\\\\\"') + '\");\\n' : \"\");\n      return add;\n    };\n    while ((match = re.exec(html))) {\n      add(html.slice(cursor, match.index))(match[1], true);\n      cursor = match.index + match[0].length;\n    }\n    add(html.substr(cursor, html.length - cursor));\n    code = (code + 'return r.join(\"\"); }').replace(/[\\r\\t\\n]/g, \" \");\n    return new Function(\"params\", code);\n  }\n}\n\nexport class Template extends Base {\n  constructor(id = \"\") {\n    super(id, name);\n    return new TemplateEngine(this.el.textContent.trim());\n  }\n}\n","// modules\nimport Version from \"./version\";\nimport Bus from \"./modules/bus.js\";\n\n// components\nimport { Accordion } from \"./components/accordion/accordion\";\nimport { Template } from \"./components/template/template\";\n\nconst modules = {};\nconst components = {};\ncomponents.Accordion = Accordion;\ncomponents.Template = Template;\n\nexport default class Feds {\n  constructor() {\n    this.debug = window.location.hash === \"#debug\";\n    if (this.debug) console.time(\"feds\");\n    this.version = Version;\n    this.components = {};\n    this.lib = {};\n    this.lib.modules = modules;\n    this.lib.components = components;\n    this.bus = new Bus();\n    this.params = new URL(window.location.href).searchParams;\n  }\n  init() {\n    this.initComponents();\n    if (this.debug) console.timeEnd(\"feds\");\n  }\n  initComponents() {\n    [].slice\n      .call(document.querySelectorAll(\"[data-component]\"))\n      .forEach(this.initComponent.bind(this));\n    return this;\n  }\n  initComponent(c) {\n    const component = this.lib.components[c.dataset.component];\n    if (!component) return this;\n    const instance = new component(c.id);\n    this.components[c.id] = instance;\n    return this;\n  }\n  get(componentId) {\n    return this.components[componentId];\n  }\n}\n","// meta\nimport Feds from \"./feds\";\n\nconst feds = new Feds();\nwindow.feds = feds;\ndocument.addEventListener(\"DOMContentLoaded\", feds.init.bind(feds));\n"],"names":["Bus","event","listener","_eventCollection","push","self","fn","off","apply","arguments","on","listeners","forEach","i","splice","length","args","slice","Component","id","el","document","querySelector","Tab","parent","expanded","dataset","tab","label","content","caret","addEventListener","toggle","bind","classList","Accordion","name","tabs","initTabs","children","map","Base","TemplateEngine","html","re","reExp","code","cursor","match","add","line","js","replace","exec","index","substr","Function","Template","textContent","trim","modules","components","Feds","debug","window","location","hash","console","time","version","Version","lib","bus","params","URL","href","searchParams","initComponents","timeEnd","call","querySelectorAll","initComponent","c","component","instance","componentId","feds","init"],"mappings":"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"}