<script>
function responsify() {
    new feds.Responsifier()
        // TOP
        .add({
            observer: "#top",
            observable: window,
            event: feds.Responsifier.SCROLL,
            range: [0, 199],
            add: ["pos-bottom-hide"],
            remove: ["pos-bottom-s"]
        })
        .add({
            observer: "#top",
            observable: window,
            event: feds.Responsifier.SCROLL,
            range: [200, "*"],
            add: ["pos-bottom-s"],
            remove: ["pos-bottom-hide"]
        })
        .add({
            observer: "#top",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [0, 999],
            add: ["hide"],
            lock: ["hide"]
        })
        .add({
            observer: "#top",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [1000, "*"],
            remove: ["hide"],
            unlock: ["hide"]
        })
        // LAYOUT
        .add({
            observer: "#layout",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [0, 999],
            add: ["flex-dir-col", "pad-top-l", "is-mobile"]
        })
        .add({
            observer: "#layout",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [1000, "*"],
            remove: ["flex-dir-col", "pad-top-l", "is-mobile"]
        })
        // MENU
        .add({
            observer: "#menuToggle",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [0, 999],
            remove: ["hide"]
        })
        .add({
            observer: "#menuToggle",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [1000, "*"],
            add: ["hide"]
        })
        .add({
            observer: "#mainMenu",
            observable: "#menuToggle",
            event: feds.Responsifier.CLICK,
            toggle: ["hide"]
        })
        .add({
            observer: "#mainMenu",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [0, 999],
            add: ["hide"]
        })
        .add({
            observer: "#mainMenu",
            observable: window,
            event: feds.Responsifier.RESIZE,
            range: [1000, "*"],
            remove: ["hide"]
        })
        .add({
            observer: "#mainMenu",
            observable: "#mainMenu a",
            event: feds.Responsifier.CLICK,
            toggle: ["hide"],
            condition: function (r, e) {
                return document
                    .querySelector("#layout")
                    .classList.contains("is-mobile");
            }
        })
        .add({
            observer: "#modal",
            observable: "#modalTrigger",
            event: feds.Responsifier.CLICK,
            toggle: ["flex"]
        })
        .add({
            observer: "#modal",
            observable: "#modalClose",
            event: feds.Responsifier.CLICK,
            toggle: ["flex"]
        })
        .add({
            observer: "#popupExample",
            observable: "#popupExampleTrigger",
            event: feds.Responsifier.CLICK,
            toggle: ["flex"]
        })
        .add({
            observer: "#popupExample",
            observable: "#popupExampleClose",
            event: feds.Responsifier.CLICK,
            toggle: ["flex"]
        })
        .init();
}

function pageManager() {
    var sections = [].slice.call(document.querySelectorAll("section"));
    [].slice.call(document.querySelectorAll("a.nav-item")).forEach(function (i) {
        i.addEventListener('click', function (e) {
            var href = e.target.getAttribute("href");
            if (href.substring(0, 1) === "h") return window.location.href = href;
            e.preventDefault();
            window.location.hash = href;
            sections.forEach(function (ii) {
                ii.classList.add("hide");
            });
            document.querySelector(href).classList.remove("hide");
            window.scrollTo(0, 0);
        });
    });
    if (window.location.hash) {
        document.querySelector(window.location.hash).classList.remove("hide");
    } else {
        document.querySelector("#About").classList.remove("hide")
    }
}

function cleanUpExamples() {
    var code = document.querySelectorAll("*");
    for (var i = 0; i < code.length; i++) {
        code[i].innerHTML = code[i].innerHTML
            .replace(/                 /g, "")
            .trim();
    }
}

function scrollToTop() {
    window.scrollTo(0, 0);
}

document.addEventListener("DOMContentLoaded", function () {
    cleanUpExamples();
    responsify();
    pageManager();
});

window.addEventListener("hashchange", function () {
    var sections = [].slice.call(document.querySelectorAll("section"));
    sections.forEach(function (ii) {
        ii.classList.add("hide");
    });
    document.querySelector(window.location.hash).classList.remove("hide");
    scrollToTop();
}, false);
</script>